# PhoenixCoder 性能测试环境配置
# 此文件包含性能测试所需的环境变量

# 应用服务 URL
BASE_URL=http://localhost:3000
API_BASE_URL=http://localhost:8000

# 测试用户凭据
TEST_USER_EMAIL=test@phoenixcoder.com
TEST_USER_PASSWORD=TestPassword123!

# 管理员用户凭据（用于高权限测试）
ADMIN_USER_EMAIL=admin@phoenixcoder.com
ADMIN_USER_PASSWORD=AdminPassword123!

# 测试数据库配置（如果需要直接数据库操作）
TEST_DB_HOST=localhost
TEST_DB_PORT=5432
TEST_DB_NAME=phoenixcoder_test
TEST_DB_USER=postgres
TEST_DB_PASSWORD=postgres

# Redis 配置（如果需要缓存测试）
TEST_REDIS_HOST=localhost
TEST_REDIS_PORT=6379
TEST_REDIS_PASSWORD=

# 性能测试配置
# 默认虚拟用户数
DEFAULT_VUS=10

# 默认测试持续时间
DEFAULT_DURATION=5m

# 最大响应时间阈值（毫秒）
MAX_RESPONSE_TIME=1000

# 错误率阈值（百分比）
MAX_ERROR_RATE=1

# 并发测试配置
MAX_CONCURRENT_TESTS=4

# 报告配置
REPORTS_DIR=./reports/performance
REPORT_FORMAT=html,json

# k6 配置
K6_OUT=json=performance-results.json
K6_CONSOLE_OUTPUT=stdout

# 测试场景配置
# 负载测试
LOAD_TEST_VUS=20
LOAD_TEST_DURATION=10m
LOAD_TEST_RAMP_UP=2m
LOAD_TEST_RAMP_DOWN=2m

# 压力测试
STRESS_TEST_VUS=100
STRESS_TEST_DURATION=15m
STRESS_TEST_RAMP_UP=5m
STRESS_TEST_RAMP_DOWN=3m

# 峰值测试
SPIKE_TEST_VUS=200
SPIKE_TEST_DURATION=10m
SPIKE_TEST_SPIKE_DURATION=2m

# 容量测试
VOLUME_TEST_VUS=50
VOLUME_TEST_DURATION=30m

# API 测试配置
API_TEST_VUS=15
API_TEST_ITERATIONS=200
API_TEST_MAX_DURATION=10m

# 前端测试配置
FRONTEND_TEST_VUS=10
FRONTEND_TEST_DURATION=5m

# 认证测试配置
AUTH_TEST_VUS=20
AUTH_TEST_DURATION=5m

# 任务测试配置
TASKS_TEST_VUS=25
TASKS_TEST_DURATION=8m

# 网络配置
# 模拟慢速网络（毫秒）
SLOW_NETWORK_DELAY=500

# 超时配置
HTTP_TIMEOUT=30s
HTTP_CONNECT_TIMEOUT=10s

# 重试配置
MAX_RETRIES=3
RETRY_DELAY=1s

# 监控配置
# 是否启用实时监控
ENABLE_MONITORING=true

# 监控间隔（秒）
MONITORING_INTERVAL=5

# 是否收集系统指标
COLLECT_SYSTEM_METRICS=true

# 通知配置
# Slack 通知（可选）
SLACK_WEBHOOK_URL=
SLACK_CHANNEL=#performance-tests

# 邮件通知（可选）
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
NOTIFICATION_EMAIL=

# 第三方服务配置
# GitHub API（用于获取代码变更信息）
GITHUB_TOKEN=
GITHUB_REPO=phoenixcoder/phoenixcoder

# 性能基准配置
# 基准数据文件路径
BENCHMARK_DATA_FILE=./tests/performance/benchmarks.json

# 性能回归阈值（百分比）
PERFORMANCE_REGRESSION_THRESHOLD=10

# 是否自动更新基准
AUTO_UPDATE_BENCHMARK=false

# 测试数据配置
# 测试用户数量
TEST_USERS_COUNT=100

# 测试任务数量
TEST_TASKS_COUNT=500

# 测试技能数量
TEST_SKILLS_COUNT=50

# 文件上传测试
TEST_FILE_SIZE_MB=10
TEST_FILE_TYPES=jpg,png,pdf,doc

# 缓存测试
CACHE_TEST_ENABLED=true
CACHE_TTL=300

# 数据库连接池测试
DB_POOL_SIZE=20
DB_MAX_CONNECTIONS=100

# 微服务测试配置
# 用户服务
USER_SERVICE_URL=http://localhost:8001

# 任务服务
TASK_SERVICE_URL=http://localhost:8002

# 通知服务
NOTIFICATION_SERVICE_URL=http://localhost:8003

# 文件服务
FILE_SERVICE_URL=http://localhost:8004

# 搜索服务
SEARCH_SERVICE_URL=http://localhost:8005

# 安全测试配置
# 是否启用安全测试
SECURITY_TEST_ENABLED=true

# SQL 注入测试
SQL_INJECTION_TEST=true

# XSS 测试
XSS_TEST=true

# CSRF 测试
CSRF_TEST=true

# 可访问性测试配置
# 是否启用可访问性测试
ACCESSIBILITY_TEST_ENABLED=true

# WCAG 级别
WCAG_LEVEL=AA

# 浏览器兼容性测试
BROWSER_COMPATIBILITY_TEST=true
TEST_BROWSERS=chrome,firefox,safari,edge

# 移动端测试
MOBILE_TEST_ENABLED=true
MOBILE_DEVICES=iphone,android,tablet

# 性能预算配置
# 页面加载时间预算（毫秒）
PAGE_LOAD_BUDGET=3000

# 首次内容绘制预算（毫秒）
FCP_BUDGET=1500

# 最大内容绘制预算（毫秒）
LCP_BUDGET=2500

# 累积布局偏移预算
CLS_BUDGET=0.1

# 首次输入延迟预算（毫秒）
FID_BUDGET=100

# 日志配置
# 日志级别
LOG_LEVEL=info

# 是否启用详细日志
VERBOSE_LOGGING=false

# 日志文件路径
LOG_FILE=./logs/performance-test.log

# 是否保存请求/响应日志
SAVE_HTTP_LOGS=false

# CI/CD 配置
# 是否在 CI 环境中运行
CI_MODE=false

# CI 环境下的简化配置
CI_REDUCED_DURATION=true
CI_REDUCED_VUS=true

# 并行测试数量（CI 环境）
CI_PARALLEL_TESTS=2

# 开发模式配置
# 是否启用开发模式
DEV_MODE=false

# 开发模式下跳过某些测试
DEV_SKIP_LONG_TESTS=true

# 开发模式下的快速测试配置
DEV_QUICK_TEST_DURATION=1m
DEV_QUICK_TEST_VUS=5