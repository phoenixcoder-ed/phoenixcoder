# PhoenixCoder 环境配置示例
# 复制此文件为 .env 并根据实际情况修改配置

# =============================================================================
# 开发环境配置
# =============================================================================

# OIDC 认证服务配置
OIDC_ISSUER=http://localhost:8000
OIDC_CLIENT_ID=phoenixcoder-client
# 警告：请使用强随机密钥，建议使用 security/generate-keys.sh 生成
OIDC_CLIENT_SECRET=your_oidc_client_secret_here_at_least_32_characters
OIDC_REDIRECT_URI=http://localhost:3000/auth/callback

# JWT 配置
# 警告：请使用强随机密钥，建议使用 security/generate-keys.sh 生成
JWT_SECRET=your_jwt_secret_key_here_at_least_32_characters

# 数据库配置
# 警告：请使用强密码，建议使用 security/generate-keys.sh 生成
DATABASE_URL=postgresql://phoenixcoder:your_strong_postgres_password_here@localhost:5432/phoenixcoder
POSTGRES_DB=phoenixcoder
POSTGRES_USER=phoenixcoder
POSTGRES_PASSWORD=your_strong_postgres_password_here

# Redis 配置
REDIS_URL=redis://localhost:6379/0
# 警告：请使用强密码，建议使用 security/generate-keys.sh 生成
REDIS_PASSWORD=your_redis_password_here

# 应用配置
APP_NAME=PhoenixCoder
APP_VERSION=1.0.0
APP_ENV=development
DEBUG=true

# 服务端口配置
SERVER_PORT=8001
OIDC_PORT=8000
ADMIN_PORT=3000
REDIS_PORT=6379
POSTGRES_PORT=5432

# 日志配置
LOG_LEVEL=DEBUG
LOG_DIR=logs
LOG_FILE=phoenixcoder.log
LOG_MAX_SIZE=10MB
LOG_BACKUP_COUNT=5
LOG_CONSOLE_COLORS=true
LOG_REQUEST_ID=true
LOG_SLOW_REQUEST_THRESHOLD=1.0

# =============================================================================
# 生产环境配置 (生产环境请修改以下配置)
# =============================================================================

# 测试环境 OIDC 配置 (MicroK8s)
# OIDC_ISSUER=http://192.168.3.30:8000
# OIDC_CLIENT_ID=phoenixcoder-test-client
# OIDC_CLIENT_SECRET=your-test-client-secret
# OIDC_REDIRECT_URI=http://192.168.3.30:3000/auth/callback

# 生产环境 JWT 配置
# JWT_SECRET=your-super-secure-production-jwt-secret

# 生产环境数据库配置
# DATABASE_URL=postgresql://user:password@prod-db:5432/phoenixcoder
# POSTGRES_DB=phoenixcoder_prod
# POSTGRES_USER=phoenixcoder_prod
# POSTGRES_PASSWORD=your-production-db-password

# 生产环境 Redis 配置
# REDIS_URL=redis://prod-redis:6379/0
# REDIS_PASSWORD=your-production-redis-password

# 生产环境应用配置
# APP_ENV=production
# DEBUG=false
# LOG_LEVEL=INFO

# =============================================================================
# 第三方服务配置
# =============================================================================

# 邮件服务配置
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_USE_TLS=true

# 短信服务配置
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# 文件存储配置
STORAGE_PROVIDER=local
STORAGE_PATH=./uploads
# 或使用云存储
# STORAGE_PROVIDER=s3
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=phoenixcoder-uploads

# =============================================================================
# 企业版特有配置
# =============================================================================

# 企业许可证配置
ENTERPRISE_LICENSE_KEY=your_enterprise_license_key_here
ENTERPRISE_FEATURES_CONFIG=/app/config/enterprise-features.json

# 团队管理配置
MAX_TEAM_MEMBERS=100
MAX_PROJECTS_PER_TEAM=50
TEAM_WORKSPACE_ENABLED=true

# SSO 配置
SSO_ENABLED=true
SSO_PROVIDER=okta
SSO_CLIENT_ID=your_sso_client_id_here
SSO_CLIENT_SECRET=your_sso_client_secret_here

# 审计日志配置
AUDIT_LOGS_ENABLED=true
IP_WHITELIST_ENABLED=false
IP_WHITELIST=127.0.0.1,10.0.0.0/8

# 备份配置
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=90
BACKUP_STORAGE_PATH=/backups

# 第三方集成
SLACK_WEBHOOK_URL=your_slack_webhook_url_here
JIRA_API_TOKEN=your_jira_api_token_here
GITHUB_WEBHOOK_SECRET=your_github_webhook_secret_here

# 性能配置
CACHE_TTL=3600
RATE_LIMIT_PER_MINUTE=1000
MAX_CONCURRENT_REQUESTS=100

# =============================================================================
# 安全配置
# =============================================================================

# CORS 配置
CORS_ORIGINS=http://localhost:3000,http://localhost:8000,http://localhost:8001
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization

# 速率限制配置
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=900

# 会话配置
SESSION_SECRET=your-session-secret
SESSION_MAX_AGE=86400000

# =============================================================================
# 监控配置
# =============================================================================

# 健康检查配置
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# 指标监控配置
METRICS_ENABLED=true
METRICS_PORT=9090

# 告警配置
ALERT_WEBHOOK_URL=https://hooks.slack.com/services/your-webhook
ALERT_EMAIL=admin@phoenixcoder.com